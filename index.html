<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Быстрый старт. Размещение интерактивной карты на странице</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script
      src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=c6eadd12-4b26-4362-9fbd-7d30e54da611"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
            //   navigator.geolocation.getCurrentPosition((position) => {
            //     const { latitude, longitude } = position.coords;
            //     // Show a map centered at latitude / longitude.
            //   });

      ymaps.ready(init);
      function init() {
        let location = [];

        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(showPosition, errorCallback);
        } else {
          console.log("Geolocation is not supported by this browser.");
        }

        function showPosition(position) {
          let latitude = position.coords.latitude;
          let longitude = position.coords.longitude;

          location = [latitude, longitude];

          console.log("Latitude: " + latitude);
          console.log("Longitude: " + longitude);
        }

        function errorCallback(error) {
          console.log("error occured");
        }

        let coords = [location[0], location[1]];

        let myMap = new ymaps.Map("map", {
          center: coords,
          zoom: 13,
          controls: [],
        });

        let geolocationControl = new ymaps.control.GeolocationControl({
          options: {
            noPlacemark: false, // Отключаем отображение метки на карте
            placemarkOptions: {
              preset: "islands#blueCircleIcon", // Здесь указывается цвет метки
            },
          },
        });

        // Добавляем кнопку на карту
        myMap.controls.add(geolocationControl);

        //func to get points data

        let points = [
          [56.84401472204153, 60.65393900228841],
          [56.82906577816284, 60.59882364897638],
          coords,
        ];

        ymaps.route(points).then(
          function (route) {
            myMap.geoObjects.add(route);

            var points = route.getWayPoints();

            // Задаем стиль метки - иконки будут красного цвета, и
            // их изображения будут растягиваться под контент.
            points.options.set("preset", "twirl#redStretchyIcon");
            // Задаем контент меток в начальной и конечной точках.
            points.get(0).properties.set("iconContent", "Уник");
            points.get(1).properties.set("iconContent", "Гринвич");
            points
              .get(points.getLength() - 1)
              .properties.set("iconContent", "Хата");
          },
          function (error) {
            alert("Возникла ошибка: " + error.message);
          }
      )};
    </script>
  </head>

  <body>
    <div id="map" style="width: 1000px; height: 800px; margin: auto"></div>
  </body>
</html>
